{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '45042882-3b5507a901f9feb9cee5f866e';\nconst IMAGE_TYPE = 'photo';\nconst ORIENTATION = 'horizontal';\nconst SAFESEARCH = 'true';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: IMAGE_TYPE,\n        orientation: ORIENTATION,\n        safesearch: SAFESEARCH,\n        per_page: PER_PAGE,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(`Oooops error: ${error.message}`);\n  }\n}\n","export function imageTemplate({\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n  webformatURL,\n}) {\n  return `\n      <a href=\"${largeImageURL}\" class=\"gallery-item\" data-lightbox=\"image-${largeImageURL}\" data-title=\"${tags}\">\n        <div class=\"item-gallery\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"list-img\">\n          <figcaption class=\"figcaption\">\n            <div class=\"figcaption-item\">\n              <span>Likes</span>\n              <span class=\"counter\">${likes}</span>\n            </div>\n            <div class=\"figcaption-item\">\n              <span>Views</span>\n              <span class=\"counter\">${views}</span>\n            </div>\n            <div class=\"figcaption-item\">\n              <span>Comments</span>\n              <span class=\"counter\">${comments}</span>\n            </div>\n            <div class=\"figcaption-item\">\n              <span>Downloads</span>\n              <span class=\"counter\">${downloads}</span>\n            </div>\n          </figcaption>\n        </div>\n      </a>\n    `;\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { imageTemplate } from './js/render-functions';\n\nconst form = document.querySelector('#search-form');\nconst inputRef = document.querySelector('.js-search-input');\nconst galleryRef = document.querySelector('.gallery');\nconst loader = document.querySelector('#loader');\nconst loadMoreBtn = document.querySelector('#load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', event => {\n  event.preventDefault(); \n\n  currentQuery = inputRef.value.trim();\n\n  if (currentQuery !== '') {\n    currentPage = 1;\n    totalHits = 0;\n    galleryRef.innerHTML = ''; \n    loadMoreBtn.style.display = 'none'; \n    onClickSearch(currentQuery, currentPage);\n  } else {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query!',\n    });\n  }\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  currentPage += 1;\n  onClickSearch(currentQuery, currentPage);\n});\n\nasync function onClickSearch(query, page) {\n  loader.style.display = 'block';\n  try {\n    const data = await fetchImages(query, page);\n    if (page === 1) {\n      totalHits = data.totalHits;\n    }\n    if (data.hits.length === 0 && page === 1) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      data.hits.forEach(image => {\n        const imageMarkup = imageTemplate(image);\n        galleryRef.insertAdjacentHTML('beforeend', imageMarkup);\n      });\n      iziToast.success({\n        title: 'Success',\n        message: 'Images loaded successfully!',\n      });\n\n      const lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      lightbox.refresh(); \n\n      if (galleryRef.childElementCount < totalHits) {\n        loadMoreBtn.style.display = 'block'; \n      } else {\n        loadMoreBtn.style.display = 'none'; \n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n\n      const { height: cardHeight } = document\n        .querySelector('.gallery')\n        .firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `An error occurred: ${error.message}`,\n    });\n    console.log(error);\n  } finally {\n    loader.style.display = 'none'; \n  }\n}\n"],"names":["BASE_URL","API_KEY","IMAGE_TYPE","ORIENTATION","SAFESEARCH","PER_PAGE","fetchImages","query","page","axios","error","imageTemplate","largeImageURL","tags","likes","views","comments","downloads","webformatURL","form","inputRef","galleryRef","loader","loadMoreBtn","currentPage","currentQuery","totalHits","event","onClickSearch","iziToast","data","image","imageMarkup","SimpleLightbox","cardHeight"],"mappings":"+vBAEA,MAAMA,EAAW,2BACXC,EAAU,qCACVC,EAAa,QACbC,EAAc,aACdC,EAAa,OACbC,EAAW,GAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CACjD,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIT,EAAU,CACzC,OAAQ,CACN,IAAKC,EACL,EAAGM,EACH,WAAYL,EACZ,YAAaC,EACb,WAAYC,EACZ,SAAUC,EACV,KAAMG,CACP,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAM,iBAAiBA,EAAM,OAAO,EAAE,CACjD,CACH,CC1BO,SAASC,EAAc,CAC5B,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,aAAAC,CACF,EAAG,CACD,MAAO;AAAA,iBACQN,CAAa,+CAA+CA,CAAa,iBAAiBC,CAAI;AAAA;AAAA,sBAEzFK,CAAY,UAAUL,CAAI;AAAA;AAAA;AAAA;AAAA,sCAIVC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,sCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,KAM/C,CC1BA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhBP,EAAK,iBAAiB,SAAUQ,GAAS,CACvCA,EAAM,eAAc,EAEpBF,EAAeL,EAAS,MAAM,OAE1BK,IAAiB,IACnBD,EAAc,EACdE,EAAY,EACZL,EAAW,UAAY,GACvBE,EAAY,MAAM,QAAU,OAC5BK,EAAcH,EAAcD,CAAW,GAEvCK,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACf,CAAK,CAEL,CAAC,EAEDN,EAAY,iBAAiB,QAAS,IAAM,CAC1CC,GAAe,EACfI,EAAcH,EAAcD,CAAW,CACzC,CAAC,EAED,eAAeI,EAAcrB,EAAOC,EAAM,CACxCc,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAMQ,EAAO,MAAMxB,EAAYC,EAAOC,CAAI,EAI1C,GAHIA,IAAS,IACXkB,EAAYI,EAAK,WAEfA,EAAK,KAAK,SAAW,GAAKtB,IAAS,EACrCqB,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,MACI,CACLC,EAAK,KAAK,QAAQC,GAAS,CACzB,MAAMC,EAAcrB,EAAcoB,CAAK,EACvCV,EAAW,mBAAmB,YAAaW,CAAW,CAC9D,CAAO,EACDH,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,6BACjB,CAAO,EAEgB,IAAII,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,GACtB,CAAO,EACQ,QAAO,EAEZZ,EAAW,kBAAoBK,EACjCH,EAAY,MAAM,QAAU,SAE5BA,EAAY,MAAM,QAAU,OAC5BM,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACnB,CAAS,GAGH,KAAM,CAAE,OAAQK,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAC1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,CACF,CACF,OAAQxB,EAAO,CACdmB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sBAAsBnB,EAAM,OAAO,EAClD,CAAK,EACD,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRY,EAAO,MAAM,QAAU,MACxB,CACH"}